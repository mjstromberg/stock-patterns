<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Stock Pattern Analyzer</title>
    <link rel="stylesheet" href="assets/stylesheets/main.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!--<script src="/assets/javascripts/tester.js"></script>-->
  </head>
  <body>
    <h1>Stock Pattern Analyzer</h1>
    <p>Pick a stock:</p>
    <div id="tester" style="width:600px;height:250px;"></div>
    <label>
      <input type="text" id="ajaxTextbox"/>
    </label>
    <span id="ajaxButton" style="cursor: pointer; text-decoration: underline">Enter Ticker Symbol</span>
    <script>
      TESTER = document.getElementById('tester');
      Plotly.plot( TESTER, [{
        x: [1, 2, 3, 4, 5],
        y: [1, 2, 4, 8, 16] }], {
        margin: {t: 0 } } );
    </script>
    
    <!--https://www.quandl.com/api/v3/datasets/WIKI/FB.json?api_key=fyWKH12nMF4VuWFaXARN&limit=100&-->
    
    <script type="text/javascript">
      (function() {
        var httpRequest;
        
        document.getElementById("ajaxButton").onclick = function() {
          var stockName = document.getElementById("ajaxTextbox").value.toString().toUpperCase();
          var stockURL = 'https://www.quandl.com/api/v3/datasets/WIKI/' + stockName + '.json?api_key=fyWKH12nMF4VuWFaXARN&limit=100';
          
          if (stockName) {
            makeRequest(stockURL);
          }
        }
        
        function makeRequest(url) {
          httpRequest = new XMLHttpRequest();
          
          if (!httpRequest) {
            alert('Unable to create an XMLHTTP instance.');
            return false;
          }
          
          httpRequest.onreadystatechange = alertContents;
          httpRequest.open('GET', url);
          httpRequest.send();
        }
        
        function alertContents() {
          try {
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
              if (httpRequest.status === 200) {
                var response = JSON.parse(httpRquest.responseText);
                alert(response.dataset.data);
              } else {
                alert('There was a problem with the request.');
              }
            }
          }
          catch( e ) {
            alert('Caught Exception: ' + e.description);
          }
        }
      })();
    </script>
  </body>
</html>

















